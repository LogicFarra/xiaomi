"use strict";(self["webpackChunkxiaomi"]=self["webpackChunkxiaomi"]||[]).push([[327],{6970:function(t,e,r){r.d(e,{Z:function(){return l}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"main_container"},[e("h1",[t._v(t._s(t.title))]),e("ul",{style:t.a},t._l(t.allData,(function(r){return e("li",{key:r.index},[e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.addSuccess&&t.index==r.index,expression:"addSuccess && index == item.index"}],staticClass:"drop"},[t._v(" 成功添加购物车 ")])]),e("img",{attrs:{src:r.img}}),e("p",{staticClass:"product"},[t._v(t._s(r.name))]),e("p",{staticClass:"price"},[t._v(t._s(r.price))]),e("p",{staticClass:"recommend"},[t._v(t._s(r.good)+"人好评")]),e("div",{staticClass:"add",on:{click:function(e){return t.add(r.index,r.name)}}},[t._v("加入购物车")])],1)})),0),e("div",{staticClass:"points"},[e("span",{class:{cur:1===t.curIndex},on:{click:function(e){return t.switchImg("left")}}}),e("span",{class:{cur:2===t.curIndex},on:{click:function(e){return t.switchImg("right")}}})])])])},s=[],u=r(586),i={name:"youLike",data(){return{allData:[],addSuccess:!1,index:0,a:"",curIndex:1}},props:{title:{default:"猜你喜欢"}},methods:{async getinitdata(){const{data:t}=await(0,u.Zj)();this.allData=t.slice(0,10);let e=0;this.allData.forEach((t=>{t.index=e++}))},animation(t){this.index=t,this.addSuccess=!0,setTimeout((()=>{this.addSuccess=!1}),1e3)},async add(t,e){const{data:r}=await(0,u.hJ)(e);let{color:n,version:s,product:i}=r[0],a={color:n[0].color,img:n[0].img,version:s[0].text,price:s[0].price,product:i};await(0,u.s2)(a),this.animation(t)},switchImg(t){if("right"===t){if(2===this.curIndex)return;this.a="transform: translateX(-1245px);",this.curIndex=2}else{if(1===this.curIndex)return;this.a="transform: translateX(0);",this.curIndex=1}}},created(){this.getinitdata()}},a=i,c=r(1001),o=(0,c.Z)(a,n,s,!1,null,"8e434f3a",null),l=o.exports},4327:function(t,e,r){r.r(e),r.d(e,{default:function(){return d}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("div",{staticClass:"search_container"},[e("main",[e("ul",{staticClass:"main_container"},t._l(t.fullData[t.curIndex-1],(function(r,n){return e("li",{key:n,staticClass:"main_container_item",attrs:{product:"item.product"},on:{click:function(e){return t.toBuy(r.product)}}},[e("img",{attrs:{src:r.img,alt:"",width:"200px"}}),e("p",{staticClass:"info"},[e("font",[t._v(t._s(r.product))]),t._v("   "),e("font",[t._v(t._s(r.color))])],1),e("p",{staticClass:"price"},[e("font",{staticClass:"cur_price"},[t._v(t._s(r.price)+"元")]),r.oldPrice?e("font",{staticClass:"old_price"},[t._v(t._s(r.oldPrice)+"元")]):t._e()],1),e("ul",{staticClass:"activity"},[r.ticket?e("li",{staticClass:"red"},[t._v("券")]):t._e(),r.increase?e("li",{staticClass:"red"},[t._v("加价购")]):t._e(),r.stages?e("li",{staticClass:"blue"},[t._v("分期")]):t._e(),r.gifts?e("li",{staticClass:"red"},[t._v("赠")]):t._e(),r.new?e("li",{staticClass:"green"},[t._v("新品")]):t._e()])])})),0),e("ul",{staticClass:"pages"},[e("li",{on:{click:function(e){return t.switchPage(!0)}}},[e("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]),t._l(t.pages,(function(r){return e("li",{key:r,class:{cur:t.curIndex===r},on:{click:function(e){return t.changePage(r)}}},[t._v(" "+t._s(r)+" ")])})),e("li",{on:{click:function(e){return t.switchPage(!1)}}},[e("i",{staticClass:"fa fa-chevron-right",attrs:{"aria-hidden":"true"}})])],2)]),e("footer",[e("YouLike")],1)])])},s=[],u=r(586),i=r(6970),a={name:"search",components:{YouLike:i.Z},computed:{keyWord(){return this.$route.query.product}},data(){return{fullData:[],pages:[],curIndex:1}},methods:{async getinitData(){const{data:t}=await(0,u.S6)(this.keyWord);let[e]=t[0].products;this.filterData(e),this.setPages()},filterData(t){let e=Math.ceil(t.length/8);for(let r=0;r<e;r++)this.fullData.push(t.slice(8*r,8*(r+1)))},setPages(){for(let t=1;t<=this.fullData.length;t++)this.pages.push(t)},changePage(t){this.curIndex=t,document.documentElement.scrollTop=0},switchPage(t){if(!0===t){if(1===this.curIndex)return;this.curIndex--}else{if(this.curIndex===this.pages.length)return;this.curIndex++}document.documentElement.scrollTop=0},toBuy(t){this.$router.push({path:"/shop/buy",query:{product:t}})}},created(){document.documentElement.scrollTop=0,this.getinitData()},watch:{keyWord(t){this.fullData=[],this.pages=[],this.curIndex=1,this.getinitData()}}},c=a,o=r(1001),l=(0,o.Z)(c,n,s,!1,null,"573dae7b",null),d=l.exports},586:function(t,e,r){r.d(e,{os:function(){return J},CC:function(){return N},s2:function(){return O},Ke:function(){return B},rk:function(){return X},WS:function(){return R},DX:function(){return L},Dx:function(){return D},pf:function(){return S},cV:function(){return v},W3:function(){return k},pG:function(){return _},HD:function(){return E},q$:function(){return P},Ru:function(){return T},yI:function(){return c},ys:function(){return q},_k:function(){return x},Zj:function(){return Y},T8:function(){return H},k9:function(){return m},SH:function(){return d},hJ:function(){return Z},Ee:function(){return l},Xs:function(){return w},eT:function(){return f},UE:function(){return b},sn:function(){return W},CN:function(){return o},hd:function(){return y},hj:function(){return C},fS:function(){return g},Z7:function(){return I},Sm:function(){return h},Nd:function(){return p},S6:function(){return U},xx:function(){return j},iD:function(){return $}});var n=r(7467),s=r.n(n);const u="http://localhost:3000",i=s().create({baseURL:u});var a=i;const c=()=>a.request({url:"/header_nav"}),o=()=>a.request({url:"/shuffling_figure"}),l=()=>a.request({url:"/product_nav"}),d=()=>a.request({url:"/product_aside_nav"}),f=()=>a.request({url:"/search_keywords"}),h=()=>a.request({url:"/web_channel"}),p=()=>a.request({url:"/web_channel_publicity_imgs"}),_=()=>a.request({url:"/domestic_appliance"}),m=()=>a.request({url:"/mobile_phone"}),g=()=>a.request({url:"/technology_wear"}),v=()=>a.request({url:"/computer_ipad"}),q=()=>a.request({url:"/home_appliances"}),x=()=>a.request({url:"/kitchen_appliances"}),C=()=>a.request({url:"/technology_home"}),y=()=>a.request({url:"/sport"}),k=()=>a.request({url:"/daily_necessities"}),w=()=>a.request({url:"/public_imgs"}),I=()=>a.request({url:"/video_cover"}),D=()=>a.request({url:"/after_sale"}),b=()=>a.request({url:"/service"}),S=()=>a.request({url:"/call_us"}),P=()=>a.request({url:"/footer_nav"}),T=()=>a.request({url:"/footer_sites"}),E=()=>a.request({url:"/footer_gifs"}),Z=t=>a.request({url:"/all_products?product="+t}),L=t=>a.request({url:"/user_database",params:{account:t}}),N=({id:t,account:e,password:r})=>a.request({method:"POST",url:"/user_database",data:{id:t,account:e,password:r}}),W=()=>a.request({url:"shop_car"}),X=t=>a.request({method:"DELETE",url:"shop_car/"+t}),j=({product:t,disposition:e,version:r,color:n})=>a.request({url:"shop_car",params:{product:t,disposition:e,version:r,color:n}}),O=t=>a.request({url:"shop_car",method:"POST",data:t}),U=t=>a.request({url:"search_database?type="+t}),$=()=>a.request({url:"userNav"}),B=()=>a.request({url:"changeNewImg"}),H=()=>a.request({url:"citys"}),J=t=>a.request({url:"citys",method:"POST",data:t}),R=(t,e)=>a.request({url:"citys/"+t,method:"PUT",data:e}),Y=()=>a.request({url:"youLike"})}}]);
//# sourceMappingURL=327.f7c30d40.js.map