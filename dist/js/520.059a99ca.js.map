{"version":3,"file":"js/520.059a99ca.js","mappings":"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","sources":["webpack://xiaomi/./src/components/youLike/index.vue","webpack://xiaomi/src/components/youLike/index.vue","webpack://xiaomi/./src/components/youLike/index.vue?f485","webpack://xiaomi/./src/components/youLike/index.vue?6a73","webpack://xiaomi/./src/views/cart/index.vue","webpack://xiaomi/src/views/cart/index.vue","webpack://xiaomi/./src/views/cart/index.vue?f4be","webpack://xiaomi/./src/views/cart/index.vue?d67d"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"main_container\"},[_c('h1',[_vm._v(_vm._s(_vm.title))]),_c('ul',{style:(_vm.a)},_vm._l((_vm.allData),function(item){return _c('li',{key:item.index},[_c('transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.addSuccess && _vm.index == item.index),expression:\"addSuccess && index == item.index\"}],staticClass:\"drop\"},[_vm._v(\" 成功添加购物车 \")])]),_c('img',{attrs:{\"src\":item.img}}),_c('p',{staticClass:\"product\"},[_vm._v(_vm._s(item.name))]),_c('p',{staticClass:\"price\"},[_vm._v(_vm._s(item.price))]),_c('p',{staticClass:\"recommend\"},[_vm._v(_vm._s(item.good)+\"人好评\")]),_c('div',{staticClass:\"add\",on:{\"click\":function($event){return _vm.add(item.index, item.name)}}},[_vm._v(\"加入购物车\")])],1)}),0),_c('div',{staticClass:\"points\"},[_c('span',{class:{'cur': _vm.curIndex === 1},on:{\"click\":function($event){return _vm.switchImg('left')}}}),_c('span',{class:{'cur': _vm.curIndex === 2},on:{\"click\":function($event){return _vm.switchImg('right')}}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main\">\r\n    <div class=\"main_container\">\r\n      <h1>{{title}}</h1>\r\n    <ul :style=\"a\">\r\n      <li v-for=\"item in allData\" :key=\"item.index\">\r\n        <transition>\r\n          <div class=\"drop\" v-show=\"addSuccess && index == item.index\">\r\n            成功添加购物车\r\n          </div>\r\n        </transition>\r\n        <img :src=\"item.img\" />\r\n        <p class=\"product\">{{ item.name }}</p>\r\n        <p class=\"price\">{{ item.price }}</p>\r\n        <p class=\"recommend\">{{ item.good }}人好评</p>\r\n        <div class=\"add\" @click=\"add(item.index, item.name)\">加入购物车</div>\r\n      </li>\r\n    </ul>\r\n    <div class=\"points\">\r\n      <span :class=\"{'cur': curIndex === 1}\" @click=\"switchImg('left')\"></span>\r\n      <span :class=\"{'cur': curIndex === 2}\" @click=\"switchImg('right')\"></span>\r\n    </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getLikeAPI, addProductAPI, getProductInfoAPI } from \"@/api\";\r\nexport default {\r\n  name: \"youLike\",\r\n  data() {\r\n    return {\r\n      allData: [],\r\n      addSuccess: false,\r\n      index: 0,\r\n      a:\"\",\r\n      curIndex:1\r\n    };\r\n  },\r\n  props:{\r\n    title:{\r\n      default : \"猜你喜欢\"\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取初始数据\r\n    async getinitdata() {\r\n      const { data } = await getLikeAPI();\r\n      this.allData = data.slice(0, 10);\r\n      let i = 0;\r\n      this.allData.forEach((v) => {\r\n        v.index = i++;\r\n      });\r\n    },\r\n    // 成功添加购物车提示动画\r\n    animation(index) {\r\n      this.index = index;\r\n      this.addSuccess = true;\r\n      setTimeout(() => {\r\n        this.addSuccess = false;\r\n      }, 1000);\r\n    },\r\n    // 添加到购物车方法\r\n    async add(index, name) {\r\n      // 通过商品名字在数据库中查询到该商品的详细数据\r\n      const { data } = await getProductInfoAPI(name);\r\n      // 默认选择商品的第一种配置,提取出有用信息\r\n      let { color, version, product } = data[0];\r\n      let configs = {\r\n        color: color[0].color,\r\n        img: color[0].img,\r\n        version: version[0].text,\r\n        price: version[0].price,\r\n        product: product,\r\n      };\r\n      // 将该信息添加到购物车的数据库当中\r\n      await addProductAPI(configs);\r\n      // 成功添加的动画\r\n      this.animation(index);\r\n    },\r\n    // 切换商品方法\r\n    switchImg(status){\r\n      if(status === 'right'){\r\n        if(this.curIndex === 2) return\r\n        this.a = \"transform: translateX(-1245px);\"\r\n        this.curIndex = 2\r\n      }else{\r\n        if(this.curIndex === 1) return\r\n        this.a = \"transform: translateX(0);\"\r\n        this.curIndex = 1\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getinitdata();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.main {\r\n  .main_container{\r\n  padding: 50px 0;\r\n  margin:0 auto;\r\n  width: 1226px;\r\n  overflow: hidden;\r\n  h1 {\r\n    overflow: hidden;\r\n    font-weight: 500;\r\n    color: rgb(117, 117, 117);\r\n    text-align: center;\r\n    position: relative;\r\n    &::before {\r\n      content: \"\";\r\n      width: 370px;\r\n      height: 1px;\r\n      background-color: rgba(176, 176, 176, 0.998);\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 0px;\r\n    }\r\n    &::after {\r\n      content: \"\";\r\n      width: 370px;\r\n      height: 1px;\r\n      background-color: rgba(176, 176, 176, 0.998);\r\n      position: absolute;\r\n      top: 50%;\r\n      right: 0px;\r\n    }\r\n  }\r\n  ul {\r\n    width: 3000px;\r\n    transition: 1s;\r\n    li {\r\n      display: inline-block;\r\n      text-align: center;\r\n      width: 234px;\r\n      height: 300px;\r\n      background-color: white;\r\n      position: relative;\r\n      overflow: hidden;\r\n      margin: 15px 15px 0 0;\r\n      .drop {\r\n        width: 100%;\r\n        height: 40px;\r\n        background-color: green;\r\n        position: absolute;\r\n        top: 0px;\r\n        left: 0;\r\n        text-align: center;\r\n        font-size: 13px;\r\n        color: white;\r\n        line-height: 40px;\r\n      }\r\n      .v-enter-active {\r\n        animation: drop 0.3s;\r\n      }\r\n      .v-leave-active {\r\n        animation: drop 0.3s reverse;\r\n      }\r\n      @keyframes drop {\r\n        0% {\r\n          top: -40px;\r\n        }\r\n        100% {\r\n          top: 0;\r\n        }\r\n      }\r\n      img {\r\n        width: 140px;\r\n        margin: 40px 47px 20px;\r\n      }\r\n      p {\r\n        font-size: 14px;\r\n        line-height: 25px;\r\n      }\r\n      .price {\r\n        color: #ff6700;\r\n      }\r\n      .recommend {\r\n        color: #838383;\r\n      }\r\n      .add {\r\n        width: 120px;\r\n        height: 30px;\r\n        text-align: center;\r\n        line-height: 28px;\r\n        font-size: 12px;\r\n        color: #ff6700;\r\n        border: 1px solid #ff6700;\r\n        position: absolute;\r\n        left: 50%;\r\n        transform: translate(-50%);\r\n        top: 305px;\r\n        transition: 0.3s;\r\n        background-color: white;\r\n        cursor: pointer;\r\n        &:hover {\r\n          background-color: #ff6700;\r\n          color: white;\r\n        }\r\n      }\r\n      &:hover {\r\n        .add {\r\n          top: 255px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .points {\r\n    text-align: center;\r\n    padding-top: 10px;\r\n    span {\r\n      display: inline-block;\r\n      width: 6px;\r\n      height: 6px;\r\n      cursor: pointer;\r\n      box-sizing: border-box;\r\n      background-color: #717171;\r\n      margin: 0 10px;\r\n      border-radius: 100px;\r\n      box-sizing: content-box;\r\n      border: 2px solid #f5f5f5;\r\n      transition: 0.5s;\r\n    }\r\n    .cur {\r\n      border: 2px solid #ff6700;\r\n      background: white;\r\n    }\r\n  }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8e434f3a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=8e434f3a&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8e434f3a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"cart\"},[_vm._m(0),_c('main',[_c('div',{staticClass:\"main_container\"},[_c('div',{staticClass:\"product_list\"},[_c('ul',{staticClass:\"list_header\"},[_c('li',{staticClass:\"row1\"},[_c('div',{staticClass:\"col1\"},[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.all},on:{\"change\":_vm.allChange}}),_c('span',[_vm._v(\"全选\")])]),_c('div',{staticClass:\"img\"}),_vm._m(1),_vm._m(2),_vm._m(3),_vm._m(4),_vm._m(5)]),_vm._l((_vm.initData),function(item){return _c('li',{key:item.index,staticClass:\"row2 row1\"},[_c('div',{staticClass:\"col1\"},[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":item.chose},on:{\"change\":function($event){return _vm.itemChange(item.index)}}})]),_c('div',{staticClass:\"img\"},[_c('img',{attrs:{\"src\":item.img,\"alt\":\"\",\"width\":\"80px\"}})]),_c('div',{staticClass:\"col2\"},[_vm._v(\" \"+_vm._s(item.product)+\" \"+_vm._s(item.version)+\" \"+_vm._s(item.disposition)+\" \"+_vm._s(item.color)+\" \")]),_c('div',{staticClass:\"col3\"},[_vm._v(_vm._s(item.price)+\"元\")]),_c('div',{staticClass:\"col4\"},[_c('div',{staticClass:\"counter\"},[_c('button',{on:{\"click\":function($event){return _vm.operat(true, item.index)}}},[_vm._v(\"-\")]),_c('input',{attrs:{\"type\":\"text\"},domProps:{\"value\":item.count}}),_c('button',{on:{\"click\":function($event){return _vm.operat(false, item.index)}}},[_vm._v(\"+\")])])]),_c('div',{staticClass:\"col5\"},[_vm._v(_vm._s(item.price * item.count)+\"元\")]),_c('div',{staticClass:\"col6\",on:{\"click\":function($event){return _vm.deleteFn(item)}}},[_c('i',{staticClass:\"fa fa-times\",attrs:{\"aria-hidden\":\"true\"}})])])})],2)]),_c('div',{staticClass:\"settlement\"},[_c('ul',[_c('li',{staticClass:\"continue_shopping\",on:{\"click\":_vm.continueShopping}},[_vm._v(\" 继续购物 \")]),_c('li',[_vm._v(\"|\")]),_c('li',[_vm._v(\" 已选择\"),_c('span',[_vm._v(_vm._s(_vm.productNum))]),_vm._v(\"件 \")])]),_c('div',{staticClass:\"purchase\",style:({ background: _vm.bgColor})},[_c('span',{style:({color:_vm.color}),on:{\"click\":_vm.tobuy}},[_vm._v(\"去结算\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.notis),expression:\"notis\"}]},[_vm._v(\"请勾选需要结算的商品\")])]),_c('span',[_vm._v(\"合计:\"),_c('span',[_vm._v(_vm._s(_vm.totle)+\"元\")])])])])]),_c('YouLike',{attrs:{\"title\":\"购买这件商品的人还购买了\"}}),_c('FooterCom')],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('header',[_c('div',{staticClass:\"header_container\"},[_c('img',{attrs:{\"src\":require(\"@/assets/logo-mi2.png\"),\"alt\":\"\"}}),_c('h2',[_vm._v(\"我的购物车\")]),_c('small',[_vm._v(\"温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col2\"},[_c('span',[_vm._v(\"商品名称\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col3\"},[_c('span',[_vm._v(\"单价\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col4\"},[_c('span',[_vm._v(\"数量\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col5\"},[_c('span',[_vm._v(\"小计\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col6\"},[_c('span',[_vm._v(\"操作\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"cart\">\r\n    <header>\r\n      <div class=\"header_container\">\r\n        <img src=\"@/assets/logo-mi2.png\" alt=\"\" />\r\n        <h2>我的购物车</h2>\r\n        <small>温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算</small>\r\n      </div>\r\n    </header>\r\n    <main>\r\n      <div class=\"main_container\">\r\n        <div class=\"product_list\">\r\n          <ul class=\"list_header\">\r\n            <li class=\"row1\">\r\n              <div class=\"col1\">\r\n                <input type=\"checkbox\" :checked=\"all\" @change=\"allChange\" />\r\n                <span>全选</span>\r\n              </div>\r\n              <div class=\"img\"></div>\r\n              <div class=\"col2\"><span>商品名称</span></div>\r\n              <div class=\"col3\"><span>单价</span></div>\r\n              <div class=\"col4\"><span>数量</span></div>\r\n              <div class=\"col5\"><span>小计</span></div>\r\n              <div class=\"col6\"><span>操作</span></div>\r\n            </li>\r\n            <li class=\"row2 row1\" v-for=\"item in initData\" :key=\"item.index\">\r\n              <div class=\"col1\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  :checked=\"item.chose\"\r\n                  @change=\"itemChange(item.index)\"\r\n                />\r\n              </div>\r\n              <div class=\"img\">\r\n                <img :src=\"item.img\" alt=\"\" width=\"80px\" />\r\n              </div>\r\n              <div class=\"col2\">\r\n                {{ item.product }} {{ item.version }} {{ item.disposition }}\r\n                {{ item.color }}\r\n              </div>\r\n              <div class=\"col3\">{{ item.price }}元</div>\r\n              <div class=\"col4\">\r\n                <div class=\"counter\">\r\n                  <button @click=\"operat(true, item.index)\">-</button>\r\n                  <input type=\"text\" :value=\"item.count\" />\r\n                  <button @click=\"operat(false, item.index)\">+</button>\r\n                </div>\r\n              </div>\r\n              <div class=\"col5\">{{ item.price * item.count }}元</div>\r\n              <div class=\"col6\" @click=\"deleteFn(item)\">\r\n                <i class=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"settlement\">\r\n          <ul>\r\n            <li @click=\"continueShopping\" class=\"continue_shopping\">\r\n              继续购物\r\n            </li>\r\n            <li>|</li>\r\n            <li>\r\n              已选择<span>{{ productNum }}</span\r\n              >件\r\n            </li>\r\n          </ul>\r\n          <div class=\"purchase\" :style=\"{ background: bgColor}\">\r\n            <span :style=\"{color:color}\" @click=\"tobuy\">去结算</span>\r\n            <div v-show=\"notis\">请勾选需要结算的商品</div>\r\n          </div>\r\n          <span>合计:<span>{{ totle }}元</span></span\r\n          >\r\n        </div>\r\n      </div>\r\n    </main>\r\n    <YouLike title=\"购买这件商品的人还购买了\"></YouLike>\r\n    <FooterCom></FooterCom>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FooterCom from \"@/components/footerCom/index.vue\";\r\nimport YouLike from \"@/components/youLike/index.vue\";\r\nimport {\r\n  getShopCarAPI,\r\n  deleteShopCarAPI,\r\n  searchShopCarAPI,\r\n  addProductAPI,\r\n} from \"@/api\";\r\nexport default {\r\n  name: \"cart\",\r\n  components: { FooterCom, YouLike },\r\n  data() {\r\n    return {\r\n      initData: [\r\n        {\r\n          produce: \"\",\r\n          disposition: \"\",\r\n          version: \"\",\r\n          color: \"\",\r\n          price: \"\",\r\n          img: \"\",\r\n          chose: \"\",\r\n        },\r\n      ],\r\n      totle: 0,\r\n      all: false,\r\n      bgColor: \"#bababa\",\r\n      color: \"#838383\",\r\n      notis: true,\r\n      dis : false,\r\n    };\r\n  },\r\n  computed: {\r\n    productNum() {\r\n      let newData = this.initData.filter((v) => {\r\n        return v.chose === true;\r\n      });\r\n      let a = 0;\r\n      newData.forEach((element) => {\r\n        a += element.count;\r\n      });\r\n      return a;\r\n    },\r\n  },\r\n  methods: {\r\n    // 向服务器获取初始数据\r\n    async getShopCarData() {\r\n      const { data } = await getShopCarAPI();\r\n      this.initData = this.filterData(data);\r\n    },\r\n    // 初始化初始数据\r\n    filterData(data) {\r\n      for(let i = 0 ; i < data.length; i++){\r\n        data[i].count = 1\r\n      }\r\n      // 遍历数组\r\n      for(let i=0;i<data.length;i++){\r\n        for(let j=i+1;j<data.length;j++){\r\n          // 查询相同的商品,给第一个商品的数量加一,删掉后面的商品\r\n          if(data[i].product === data[j].product && data[i].version === data[j].version && data[i].color === data[j].color){\r\n            data[i].count++\r\n            data.splice(j,1)\r\n            j--\r\n          }\r\n        }\r\n      }\r\n       // 遍历数据,添加一些基本属性\r\n       for (let i = 0; i < data.length; i++) {\r\n        data[i].index = i;    // 添加index,用来标记\r\n        data[i].chose = false;    // chose属性,表示当前商品是否被选中\r\n        data[i].price = parseInt(data[i].price);  // 转换价格的数据类型\r\n      }\r\n      return data;\r\n    },\r\n    // 商品数量的加减\r\n    async operat(status, index) {\r\n      let a = this.initData[index]\r\n      let addData = {}\r\n      if (a.count >= 1) {\r\n        if (status) {\r\n          a.count--\r\n          if(a.count >= 1){\r\n            let choseStatus = a.chose\r\n            await deleteShopCarAPI(a.id)\r\n            await this.getShopCarData()\r\n            this.initData[index].chose = choseStatus\r\n\r\n          }\r\n        }else{\r\n          a.count++\r\n          addData = {\r\n            id:Math.random(),\r\n            product:a.product,\r\n            disposition:a.disposition,\r\n            version:a.version,\r\n            color:a.color,\r\n            price:a.price,\r\n            img:a.img\r\n          }\r\n          await addProductAPI(addData)\r\n        }\r\n        if (a.chose) {\r\n          status ? (this.totle -= a.price) : (this.totle += a.price);\r\n        }\r\n        if (a.count === 0) {\r\n          a.count = 1;\r\n          a.chose ? (this.totle += a.price) : false;\r\n        }\r\n      }\r\n    },\r\n    // 商品选择框点击事件\r\n    itemChange(index) {\r\n      console.log(index)\r\n      let a = this.initData[index];\r\n      a.chose = !a.chose;\r\n      let money = a.count * a.price;\r\n      a.chose ? (this.totle += money) : (this.totle -= money);\r\n      if (!a.chose) {\r\n        this.all = false;\r\n      } else {\r\n        let a = this.initData.filter((v) => {\r\n          return v.chose === true;\r\n        });\r\n        a.length === this.initData.length ? (this.all = true) : false;\r\n      }\r\n    },\r\n    // 全选框点击事件\r\n    allChange() {\r\n      this.all = !this.all;\r\n      if (this.all === false) {\r\n        this.initData.map((v) => {\r\n          v.chose = false;\r\n          this.totle = 0;\r\n        });\r\n      } else {\r\n        this.initData.map((v) => {\r\n          if (v.chose === false) {\r\n            v.chose = true;\r\n            this.totle += v.count * v.price;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    // 删除按钮点击事件\r\n    async deleteFn(item) {\r\n      let { data } = await searchShopCarAPI(item)\r\n      let newData = data.map((v) => {\r\n        return v.id;\r\n      })\r\n      for (let i = 0; i < newData.length; i++) {\r\n        deleteShopCarAPI(newData[i]);\r\n      }\r\n      this.getShopCarData();\r\n    },\r\n    // 登录和注册按钮点击事件\r\n    jumpPage(status) {\r\n      status === true\r\n        ? this.$router.push(\"/login/signin\")\r\n        : this.$router.push(\"/login/register\");\r\n    },\r\n    // 继续购物按钮点击事件\r\n    continueShopping() {\r\n      this.$router.push(\"/\");\r\n    },\r\n    // 跳转到购买页面\r\n    tobuy(){\r\n      if(this.dis === true){\r\n        let list = this.initData.filter((v)=>{\r\n          return v.chose === true\r\n        })\r\n        sessionStorage.setItem('products',JSON.stringify(list))\r\n        this.$router.push(\"/shop/checkout\")\r\n      }else{\r\n        return\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    totle(newval) {\r\n      if (newval !== 0) {\r\n        this.bgColor = \"#ff6700\";\r\n        this.color = \"white\";\r\n        this.notis = false;\r\n        this.dis = true\r\n      } else {\r\n        this.bgColor = \"#bababa\";\r\n        this.color = \"#838383\";\r\n        this.notis = true;\r\n        this.dis = false\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.getShopCarData();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.cart {\r\n  header {\r\n    background-color: #f5f5f5;\r\n    background-color: rgb(255, 255, 255);\r\n    border-bottom: 2px solid #ff6700;\r\n    height: 100px;\r\n    box-sizing: content-box;\r\n    .header_container {\r\n      width: 1226px;\r\n      margin: 0 auto;\r\n      img {\r\n        width: 48px;\r\n        margin: 26px 50px 0 0;\r\n        float: left;\r\n      }\r\n      h2 {\r\n        display: inline-block;\r\n        font-weight: 500;\r\n        margin-right: 10px;\r\n        line-height: 100px;\r\n        color: #424242;\r\n      }\r\n      small {\r\n        color: #838383;\r\n        line-height: 110px;\r\n      }\r\n    }\r\n  }\r\n  main {\r\n    background-color: #f5f5f5;\r\n    padding: 30px 0;\r\n    .main_container {\r\n      width: 1226px;\r\n      margin: 0 auto;\r\n      .product_list {\r\n        background-color: white;\r\n        .list_header {\r\n          .row1 {\r\n            display: flex;\r\n            align-items: center;\r\n            padding-right: 26px;\r\n            height: 70px;\r\n            font-size: 14px;\r\n            border-bottom: 1px solid #bfbfbf;\r\n            .col {\r\n              height: 100%;\r\n              line-height: 70px;\r\n            }\r\n            .col1 {\r\n              width: 110px;\r\n              height: 100%;\r\n              padding: 22px 20px;\r\n              span {\r\n                margin-right: 5px;\r\n                margin-top: 2px;\r\n                float: right;\r\n              }\r\n              input {\r\n                width: 20px;\r\n                height: 20px;\r\n                background-color: #ff6700;\r\n              }\r\n            }\r\n            .img {\r\n              width: 120px;\r\n              height: 100%;\r\n            }\r\n            .col2 {\r\n              overflow: hidden;\r\n              text-overflow: ellipsis;\r\n              white-space: nowrap;\r\n              width: 380px;\r\n              height: 100%;\r\n              line-height: 70px;\r\n            }\r\n            .col3 {\r\n              width: 158px;\r\n              text-align: center;\r\n              height: 100%;\r\n              line-height: 70px;\r\n            }\r\n            .col4 {\r\n              width: 200px;\r\n              height: 100%;\r\n              text-align: center;\r\n              line-height: 70px;\r\n            }\r\n            .col5 {\r\n              width: 150px;\r\n              text-align: center;\r\n              height: 100%;\r\n              line-height: 70px;\r\n            }\r\n            .col6 {\r\n              width: 100px;\r\n              text-align: center;\r\n              height: 100%;\r\n              line-height: 70px;\r\n            }\r\n          }\r\n          .row2 {\r\n            padding: 15px 26px 15px 0;\r\n            box-sizing: content-box;\r\n            .col2 {\r\n              font-size: 18px;\r\n            }\r\n            .col3 {\r\n              font-size: 15px;\r\n            }\r\n            .col4 {\r\n              .counter {\r\n                margin: 10px auto;\r\n                width: 150px;\r\n                height: 40px;\r\n                border: 1px solid #757575;\r\n                display: flex;\r\n                button {\r\n                  width: 40px;\r\n                  height: 40px;\r\n                  border: none;\r\n                  cursor: pointer;\r\n                  background-color: transparent;\r\n                  transition: 0.3s;\r\n                  &:hover {\r\n                    background-color: #8383835b;\r\n                  }\r\n                }\r\n                input {\r\n                  width: 70px;\r\n                  height: 38px;\r\n                  text-align: center;\r\n                  border: none;\r\n                  outline: none;\r\n                }\r\n              }\r\n            }\r\n            .col5 {\r\n              color: #ff6700;\r\n              font-size: 15px;\r\n            }\r\n            .col6 {\r\n              i {\r\n                padding: 5px 6px;\r\n                border-radius: 100%;\r\n                color: #757575;\r\n                transition: 0.3s;\r\n                cursor: pointer;\r\n                &:hover {\r\n                  background-color: red;\r\n                  color: white;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .settlement {\r\n        height: 50px;\r\n        width: 1226px;\r\n        background-color: white;\r\n        margin-top: 20px;\r\n        ul {\r\n          margin-left: 30px;\r\n          height: 50px;\r\n          float: left;\r\n          li {\r\n            float: left;\r\n            line-height: 50px;\r\n            margin-right: 10px;\r\n            font-size: 14px;\r\n            color: #757575;\r\n            span {\r\n              color: #ff6700;\r\n            }\r\n          }\r\n          .continue_shopping {\r\n            cursor: pointer;\r\n            &:hover {\r\n              color: #ff6700;\r\n            }\r\n          }\r\n        }\r\n        span {\r\n          height: 50px;\r\n          line-height: 50px;\r\n          float: right;\r\n          color: #ff6700;\r\n          span {\r\n            font-size: 24px;\r\n          }\r\n        }\r\n        .purchase {\r\n          height: 100%;\r\n          width: 200px;\r\n          float: right;\r\n          text-align: center;\r\n          line-height: 50px;\r\n          background-color: #bababa;\r\n          color: #838383;\r\n          font-size: 18px;\r\n          margin-left: 40px;\r\n          position: relative;\r\n          cursor: pointer;\r\n          span{\r\n            width:100%;\r\n          }\r\n          div {\r\n            width: 200px;\r\n            height: 50px;\r\n            background-color: white;\r\n            border: 1px solid #ff6700;\r\n            font-size: 14px;\r\n            color: #ff6700;\r\n            position: absolute;\r\n            top: -60px;\r\n            &::before {\r\n              content: \"\";\r\n              width: 10px;\r\n              height: 10px;\r\n              background-color: white;\r\n              border-right: 1px solid #ff6700;\r\n              border-bottom: 1px solid #ff6700;\r\n              position: absolute;\r\n              left: 50%;\r\n              bottom: -10px;\r\n              transform: rotate(45deg) translate(-50%);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7627cd60&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7627cd60&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7627cd60\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","title","style","a","_l","allData","item","key","index","directives","name","rawName","value","addSuccess","expression","attrs","img","price","good","on","$event","add","class","curIndex","switchImg","staticRenderFns","data","props","default","methods","v","animation","setTimeout","color","version","product","created","component","_m","domProps","all","allChange","initData","chose","itemChange","disposition","operat","count","deleteFn","continueShopping","productNum","background","bgColor","tobuy","notis","totle","require","components","FooterCom","YouLike","produce","dis","computed","newData","filterData","j","addData","id","status","console","deleteShopCarAPI","jumpPage","sessionStorage","watch"],"sourceRoot":""}